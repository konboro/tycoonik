<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transport Tycoon - Industrial Operations</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Roboto:wght@400;500;700;900&family=Roboto+Mono:wght@500;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body class="w-screen h-screen flex bg-[#050505] text-[#e5e5e5] overflow-hidden font-roboto">

    <div id="auth-modal" class="fixed inset-0 bg-black/90 z-[100] flex items-center justify-center backdrop-blur-sm">
        <div class="bg-[#121212] p-8 border border-[#333] border-l-4 border-l-[#eab308] shadow-[0_0_50px_rgba(0,0,0,0.8)] w-full max-w-md relative">
            <div class="absolute top-0 right-0 bg-[#eab308] text-black text-xs font-bold px-2 py-1 font-header">SYSTEM ACCESS</div>
            <div class="text-center mb-8">
                <div class="text-6xl mb-4 text-[#eab308]"><i class="ri-earth-fill"></i></div>
                <h1 class="text-3xl font-bold text-white font-header tracking-wider">TRANSPORT TYCOON</h1>
                <p class="text-gray-500 mt-2 font-mono text-xs">SECURE LOGIN TERMINAL v9.2</p>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-[10px] font-bold text-gray-500 uppercase mb-1 tracking-widest">Identyfikator (Email)</label>
                    <input type="email" id="auth-email" class="w-full bg-black border border-[#333] text-white px-4 py-3 focus:border-[#eab308] outline-none transition font-mono" placeholder="operator@corp.net">
                </div>
                <div>
                    <label class="block text-[10px] font-bold text-gray-500 uppercase mb-1 tracking-widest">Kod Dostƒôpu</label>
                    <input type="password" id="auth-password" class="w-full bg-black border border-[#333] text-white px-4 py-3 focus:border-[#eab308] outline-none transition font-mono" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div id="auth-error" class="text-red-500 text-xs font-mono text-center hidden border border-red-900/30 bg-red-900/10 p-2"></div>
                
                <div class="flex gap-3 pt-4">
                    <button id="btn-login" class="flex-1 btn-action py-3">Zaloguj</button>
                    <button id="btn-register" class="flex-1 btn-cancel py-3 border border-[#333]">Rejestracja</button>
                </div>
            </div>
        </div>
    </div>

    <aside class="nav-sidebar w-16 flex flex-col items-center z-[600] shrink-0">
        <div class="mb-2 p-1 border border-yellow-500/20 rounded">
            <div class="w-10 h-10 bg-[#eab308] flex items-center justify-center font-bold text-black font-header text-xl">TT</div>
        </div>

        <button class="nav-btn group" data-nav-tab="fleet"><i class="ri-truck-line text-xl"></i><span class="nav-tooltip">Flota</span></button>
        <button class="nav-btn group" data-nav-tab="stations"><i class="ri-community-line text-xl"></i><span class="nav-tooltip">Infrastruktura</span></button>
        <div class="w-8 h-px bg-gray-800 my-1"></div>
        
        <button class="nav-btn group" data-nav-tab="market"><i class="ri-line-chart-line text-xl"></i><span class="nav-tooltip">Gie≈Çda</span></button>
        <button class="nav-btn group" data-nav-tab="store"><i class="ri-store-2-line text-xl"></i><span class="nav-tooltip">Sklep</span></button>
        <button class="nav-btn group" data-nav-tab="lootbox"><i class="ri-gift-2-line text-xl"></i><span class="nav-tooltip">Dostawy</span></button>
        <div class="w-8 h-px bg-gray-800 my-1"></div>

        <button class="nav-btn group" data-nav-tab="achievements"><i class="ri-trophy-line text-xl"></i><span id="ach-notification-dot" class="absolute top-1 right-1 w-2 h-2 bg-[#eab308] rounded-full hidden"></span><span class="nav-tooltip">OsiƒÖgniƒôcia</span></button>
        
        <div class="mt-auto pb-2 flex flex-col gap-1">
            <button class="nav-btn group" data-nav-tab="stats"><i class="ri-pie-chart-2-line text-xl"></i><span class="nav-tooltip">Raporty</span></button>
            <button class="nav-btn group" data-nav-tab="energy"><i class="ri-gas-station-line text-xl"></i><span class="nav-tooltip">Energia</span></button>
            <div class="w-8 h-px bg-gray-800 mx-auto my-1"></div>
            <button id="resetAll" class="nav-btn group text-red-900 hover:text-red-500 hover:border-red-900"><i class="ri-shut-down-line text-xl"></i><span class="nav-tooltip bg-red-600 text-white">Reset Systemu</span></button>
        </div>
    </aside>

    <main class="flex-grow flex flex-col relative w-full overflow-hidden">
        
        <header id="kpi-panel" class="kpi-panel h-20 grid grid-cols-3 items-center px-6 z-40 shrink-0 shadow-lg bg-[#0f0f0f] w-full">
            
            <div class="flex items-center gap-4 justify-start">
                <div class="w-12 h-12 bg-gray-800 border border-gray-700 flex items-center justify-center text-2xl rounded-sm" id="company-logo-container">
                    <span id="company-logo">üè¢</span>
                </div>
                <div>
                    <div class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">Korporacja</div>
                    <div class="flex items-center gap-2">
                        <h1 id="company-name" class="font-header text-xl text-white font-bold tracking-wide whitespace-nowrap">≈ÅADOWANIE...</h1>
                        <button id="edit-company-name-btn" class="text-gray-600 hover:text-[#eab308] transition-colors"><i class="ri-pencil-fill text-xs"></i></button>
                    </div>
                    <div class="w-32 mt-1">
                        <div class="flex justify-between text-[9px] text-gray-400 font-bold mb-0.5 font-mono">
                            <span>LVL <span id="level">1</span></span>
                            <span>XP <span id="xp">0</span>/<span id="xpNext">100</span></span>
                        </div>
                        <div class="h-1 bg-gray-800 w-full rounded-sm overflow-hidden">
                            <div id="xpProgressBar" class="h-full bg-yellow-600 w-[0%] transition-all duration-500"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex flex-col items-center justify-center">
                <div class="text-center">
                    <div class="font-mono-tech text-4xl text-[#eab308] font-bold tracking-tighter leading-none drop-shadow-md whitespace-nowrap">
                        <span id="wallet">0</span> <span class="text-sm text-gray-600 align-top mt-1 inline-block">VC</span>
                    </div>
                    <div class="flex items-center justify-center gap-2 mt-1 opacity-80 hover:opacity-100 transition-opacity">
                        <div class="text-[10px] text-gray-500 font-bold uppercase bg-[#111] px-1 rounded border border-[#333]">Zysk/h</div>
                        <div id="hourly-earnings-odometer" class="odometer-box scale-90 origin-left">
                            <div class="odometer-digit">0</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex items-center gap-3 justify-end">
                <button class="header-social-btn group" data-nav-tab="friends" title="Znajomi">
                    <i class="ri-user-heart-fill"></i>
                    <span class="label">Znajomi</span>
                </button>
                <button class="header-social-btn group" data-nav-tab="guild" title="Gildia">
                    <i class="ri-group-fill"></i>
                    <span class="label">Gildia</span>
                </button>
                <button class="header-social-btn group" data-nav-tab="company" title="Moja Firma">
                    <i class="ri-building-2-fill"></i>
                    <span class="label">Firma</span>
                </button>
                <button class="header-social-btn group" data-nav-tab="profile" title="Ustawienia">
                    <i class="ri-settings-4-fill"></i>
                    <span class="label">Profil</span>
                </button>
            </div>
        </header>

        <div class="flex-grow relative overflow-hidden w-full h-full">
            
            <div id="map" class="w-full h-full z-0 bg-[#0a0a0a]"></div>
            <div class="grid-overlay"></div>

            <div id="notification-container" class="absolute top-4 right-4 z-[1000] flex flex-col gap-2 pointer-events-none"></div>

            <div id="map-filters-types" class="absolute top-4 right-4 z-[800] flex flex-col gap-2 pointer-events-auto"></div>

            <div id="map-filters-ownership" class="absolute bottom-6 right-4 z-[800] flex gap-1 pointer-events-auto bg-[#121212] p-1 border border-[#333] rounded shadow-xl">
                <button data-map-view="all" class="px-4 py-1 text-[10px] font-bold font-header uppercase transition-colors bg-[#eab308] text-black border border-[#eab308]">Wszystkie</button>
                <button data-map-view="fleet" class="px-4 py-1 text-[10px] font-bold font-header uppercase transition-colors bg-[#121212] text-gray-400 border border-[#333] hover:text-white">Moja Flota</button>
            </div>

            <aside id="content-panel" class="content-panel absolute top-0 left-0 h-full w-[420px] z-[500] flex flex-col transform -translate-x-full transition-transform duration-300">
                <div class="bg-[#121212] p-4 border-b border-[#333] flex justify-between items-center">
                    <div>
                        <div class="text-[10px] text-[#eab308] font-bold uppercase tracking-widest">Modu≈Ç ZarzƒÖdzania</div>
                        <h2 id="panel-title" class="font-header text-2xl text-white uppercase">PANEL</h2>
                    </div>
                    <button id="close-content-panel" class="w-8 h-8 hover:bg-[#222] text-gray-500 hover:text-white flex items-center justify-center transition">
                        <i class="ri-close-line text-xl"></i>
                    </button>
                </div>
                <div class="hazard-header h-2 shrink-0"></div>
                <div id="panel-controls" class="p-3 bg-[#151515] border-b border-[#333] hidden">
                    <div class="flex gap-2 mb-3">
                        <div class="relative flex-grow">
                            <input type="search" id="search" placeholder="Szukaj..." class="w-full bg-black border border-[#333] text-gray-300 text-sm px-3 py-2 focus:border-[#eab308] outline-none font-mono">
                            <i class="ri-search-line absolute right-3 top-2 text-gray-600"></i>
                        </div>
                        <button id="refreshAll" class="px-3 bg-[#222] border border-[#333] hover:bg-[#333] text-white transition"><i class="ri-refresh-line"></i></button>
                    </div>
                    <details class="bg-[#1a1a1a] border border-[#333]">
                        <summary class="cursor-pointer p-2 text-xs font-bold text-gray-400 uppercase tracking-wide hover:text-white">Zaawansowane Filtry</summary>
                        <div id="filters-container" class="p-3 border-t border-[#333]"></div>
                    </details>
                </div>
                <main id="mainList" class="flex-grow overflow-y-auto p-3 space-y-3 bg-[#0f0f0f] custom-scrollbar"></main>
                <footer class="p-2 bg-black border-t border-[#333] text-[10px] text-gray-600 flex justify-between font-mono">
                    <span>SYSTEM: ONLINE</span>
                    <span id="status-bar">Gotowy</span>
                </footer>
            </aside>

            <div id="vehicle-card" class="absolute bottom-8 left-1/2 -translate-x-1/2 w-[600px] z-[600] shadow-[0_0_50px_rgba(0,0,0,0.8)] transition-transform duration-300 translate-y-[150%]">
                <div class="bg-[#eab308] text-black px-4 py-1 font-header font-bold text-sm flex justify-between items-center clip-path-top">
                    <span>SPECYFIKACJA TECHNICZNA</span>
                    <button id="close-card-btn" class="hover:bg-black/20 rounded px-1"><i class="ri-close-line"></i></button>
                </div>
                <div id="vehicle-card-content" class="bg-[#181818] border-x border-b border-[#333] p-5"></div>
            </div>
        </div>

        <footer class="bg-black border-t-4 border-[#eab308] z-50 shrink-0 relative h-10 flex items-center w-full">
            <div class="bg-[#eab308] text-black font-header font-bold px-4 h-full flex items-center text-lg relative z-20 shrink-0">
                <i class="ri-notification-4-fill mr-2"></i> LIVE
                <div class="absolute right-[-10px] top-0 h-full w-4 bg-[#eab308] transform skew-x-12 origin-bottom"></div>
            </div>
            <div class="ticker-wrap w-full bg-black border-t-0">
                <div id="live-ticker" class="ticker font-bold text-sm uppercase tracking-wider flex items-center h-full">
                    <span class="mx-8 text-[#eab308]"><i class="ri-wifi-line"></i> SYSTEM ONLINE</span>
                </div>
            </div>
        </footer>

    </main>

    <div id="modals">
        <div id="lootbox-prize-modal" class="fixed inset-0 bg-black/80 z-[100] hidden items-center justify-center backdrop-blur-sm">
            <div class="bg-[#121212] p-1 border border-[#333] shadow-2xl w-full max-w-md">
                <div class="bg-[#eab308] p-2 font-header font-bold text-black text-center uppercase mb-4">Dostawa Zrealizowana</div>
                <div class="p-4 text-center">
                    <h3 id="prize-title" class="text-2xl font-bold text-white mb-4 font-header tracking-wide">OTRZYMUJESZ...</h3>
                    <div id="prize-reveal" class="h-48 mb-6 perspective-1000">
                        <div id="prize-card" class="w-full h-full relative transition-transform duration-700 transform-style-3d">
                            <div class="prize-card-face absolute inset-0 flex items-center justify-center bg-[#1a1a1a] border border-[#333] text-6xl">üì¶</div>
                            <div id="prize-card-back" class="prize-card-face prize-card-back absolute inset-0 flex items-center justify-center bg-[#1a1a1a] border-2 border-[#eab308] rotate-y-180 backface-hidden">
                                <div id="prize-details"></div>
                            </div>
                        </div>
                    </div>
                    <p id="prize-message" class="text-gray-300 font-mono text-sm mb-6 min-h-[20px]"></p>
                    <button id="close-prize-modal" class="w-full btn-action py-2">POTWIERD≈π ODBI√ìR</button>
                </div>
            </div>
        </div>
        <div id="confirm-modal" class="fixed inset-0 bg-black/80 z-[100] hidden items-center justify-center backdrop-blur-sm">
            <div class="bg-[#121212] border border-[#333] p-6 w-full max-w-sm text-center shadow-xl">
                <div class="text-[#eab308] text-4xl mb-2"><i class="ri-alert-line"></i></div>
                <h3 class="text-lg font-bold text-white font-header uppercase mb-2">Potwierdzenie</h3>
                <p id="confirm-modal-text" class="text-gray-400 text-sm mb-6 font-mono"></p>
                <div class="flex gap-3">
                    <button id="confirm-cancel-btn" class="flex-1 btn-cancel py-2 border border-[#333]">Anuluj</button>
                    <button id="confirm-ok-btn" class="flex-1 btn-action py-2">Zatwierd≈∫</button>
                </div>
            </div>
        </div>
        <div id="asset-details-modal" class="fixed inset-0 bg-black/80 z-[90] hidden items-center justify-center backdrop-blur-sm">
            <div class="bg-[#121212] border border-[#333] w-full max-w-3xl shadow-2xl">
                <div class="bg-[#1a1a1a] p-4 border-b border-[#333] flex justify-between items-center">
                    <div class="flex items-center gap-3">
                        <div id="asset-details-icon" class="text-3xl text-[#eab308]"></div>
                        <h3 id="asset-details-title" class="text-xl font-bold text-white font-header uppercase">DETAILS</h3>
                    </div>
                    <button id="close-asset-details-modal" class="text-gray-500 hover:text-white"><i class="ri-close-line text-2xl"></i></button>
                </div>
                <div class="p-6">
                    <div id="asset-details-grid" class="bg-black border border-[#333] p-4 mb-4 font-mono text-sm text-gray-300"></div>
                    <h4 class="font-bold text-gray-500 uppercase text-xs mb-2 tracking-widest">Analiza Wydajno≈õci</h4>
                    <div class="h-48 bg-black border border-[#333] p-2 relative">
                        <canvas id="asset-earnings-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div id="sell-modal" class="fixed inset-0 bg-black/80 z-[100] hidden items-center justify-center backdrop-blur-sm">
            <div class="bg-[#121212] border border-[#333] p-6 w-full max-w-md shadow-xl">
                <h3 class="text-xl font-bold text-white font-header uppercase mb-1">Sprzeda≈º Rynkowa</h3>
                <p id="sell-modal-text" class="text-gray-500 text-xs font-mono mb-4 uppercase"></p>
                <div class="space-y-4">
                    <div>
                        <label class="block text-[10px] font-bold text-gray-500 uppercase mb-1">Cena Wywo≈Çawcza (VC)</label>
                        <input type="number" id="sell-price" class="w-full bg-black border border-[#333] text-white px-3 py-2 focus:border-[#eab308] outline-none font-mono text-right text-lg">
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-gray-500 uppercase mb-1">Czas Aukcji</label>
                        <select id="sell-duration" class="w-full bg-black border border-[#333] text-white px-3 py-2 focus:border-[#eab308] outline-none font-mono">
                            <option value="1">1 Godzina</option>
                            <option value="6">6 Godzin</option>
                            <option value="12">12 Godzin</option>
                            <option value="24">24 Godziny</option>
                        </select>
                    </div>
                </div>
                <div id="sell-modal-info" class="mt-4 p-2 bg-[#1a1a1a] border border-[#333] text-xs text-gray-400 font-mono"></div>
                <div class="flex gap-3 mt-6">
                    <button id="cancel-sell-btn" class="flex-1 btn-cancel py-2 border border-[#333]">Anuluj</button>
                    <button id="confirm-sell-btn" class="flex-1 btn-action py-2">Wystaw Ofertƒô</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>